<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prueba Navegación</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
</head>
<body>
    <!-- Navegación de prueba -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="#inicio">
                <i class="bi bi-shop"></i> Restaurante
            </a>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item" id="navInicio" style="display: block;">
                        <a class="nav-link" href="#inicio">Inicio</a>
                    </li>
                    <li class="nav-item" id="navReservar" style="display: none;">
                        <a class="nav-link" href="#reservas">Reservar</a>
                    </li>
                    <li class="nav-item" id="navMenu" style="display: none;">
                        <a class="nav-link" href="#menu">Menú</a>
                    </li>
                    <li class="nav-item" id="navMisReservas" style="display: none;">
                        <a class="nav-link" href="#mis-reservas">Mis Reservas</a>
                    </li>
                    <li class="nav-item" id="navLogin" style="display: block;">
                        <a class="nav-link" href="#login">Iniciar Sesión</a>
                    </li>
                    <li class="nav-item" id="navLogout" style="display: none;">
                        <a class="nav-link" href="#" onclick="testLogout()">
                            <i class="bi bi-box-arrow-right"></i> Cerrar Sesión
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <h1>Prueba de Estados de Navegación</h1>
        
        <div class="row">
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header bg-secondary text-white">No Logueado</div>
                    <div class="card-body">
                        <p class="card-text">Mostrar: Inicio, Iniciar Sesión</p>
                        <button class="btn btn-primary" onclick="simulateNoAuth()">Simular</button>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header bg-success text-white">Cliente Logueado</div>
                    <div class="card-body">
                        <p class="card-text">Mostrar: Inicio, Reservar, Menú, Mis Reservas, Cerrar Sesión</p>
                        <button class="btn btn-success" onclick="simulateClient()">Simular</button>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header bg-dark text-white">Administrador</div>
                    <div class="card-body">
                        <p class="card-text">Mostrar: Cerrar Sesión (redirigir a admin)</p>
                        <button class="btn btn-dark" onclick="simulateAdmin()">Simular</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mt-4">
            <h3>Estado Actual:</h3>
            <div id="currentState" class="alert alert-info">No logueado</div>
        </div>
    </div>

    <script>
        let currentUser = null;

        function updateNavigationForUnauthenticated() {
            document.getElementById('navInicio').style.display = 'block';
            document.getElementById('navReservar').style.display = 'none';
            document.getElementById('navMenu').style.display = 'none';
            document.getElementById('navMisReservas').style.display = 'none';
            document.getElementById('navLogin').style.display = 'block';
            document.getElementById('navLogout').style.display = 'none';
            updateStateDisplay('No logueado');
        }

        function updateNavigationForClient() {
            document.getElementById('navInicio').style.display = 'block';
            document.getElementById('navReservar').style.display = 'block';
            document.getElementById('navMenu').style.display = 'block';
            document.getElementById('navMisReservas').style.display = 'block';
            document.getElementById('navLogin').style.display = 'none';
            document.getElementById('navLogout').style.display = 'block';
            updateStateDisplay('Cliente logueado');
        }

        function updateNavigationForAdmin() {
            document.getElementById('navInicio').style.display = 'none';
            document.getElementById('navReservar').style.display = 'none';
            document.getElementById('navMenu').style.display = 'none';
            document.getElementById('navMisReservas').style.display = 'none';
            document.getElementById('navLogin').style.display = 'none';
            document.getElementById('navLogout').style.display = 'block';
            updateStateDisplay('Administrador');
        }

        function updateStateDisplay(state) {
            document.getElementById('currentState').textContent = state;
            const alertElement = document.getElementById('currentState');
            alertElement.className = 'alert ';
            
            switch(state) {
                case 'No logueado':
                    alertElement.className += 'alert-info';
                    break;
                case 'Cliente logueado':
                    alertElement.className += 'alert-success';
                    break;
                case 'Administrador':
                    alertElement.className += 'alert-dark';
                    break;
            }
        }

        function simulateNoAuth() {
            currentUser = null;
            updateNavigationForUnauthenticated();
        }

        function simulateClient() {
            currentUser = { rol: 'cliente', nombre: 'Cliente Test' };
            updateNavigationForClient();
        }

        function simulateAdmin() {
            currentUser = { rol: 'administrador', nombre: 'Admin Test' };
            updateNavigationForAdmin();
        }

        function testLogout() {
            currentUser = null;
            updateNavigationForUnauthenticated();
        }

        // Inicializar en estado no logueado
        document.addEventListener('DOMContentLoaded', function() {
            updateNavigationForUnauthenticated();
        });
    </script>
</body>
</html>